FROM nginx:1.29-alpine

# Copy nginx configuration template
COPY nginx-render.conf /etc/nginx/templates/default.conf.template

# Set default ELECTRIC_URL for local development
ENV ELECTRIC_URL=http://electric:3000

# Expose HTTP port
EXPOSE 80

# Nginx will automatically substitute environment variables in templates
# and then start nginx
# The /docker-entrypoint.d/20-envsubst-on-templates.sh script handles this
CMD ["nginx", "-g", "daemon off;"]
